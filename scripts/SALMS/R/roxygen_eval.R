
salmsparam = function(par) {
  #' @importFrom grDevices dev.cur dev.off dev.set gray pdf 
  #' @importFrom graphics abline axis boxplot legend lines par points polygon text title
  #' @importFrom methods is
  #' @importFrom stats aggregate as.formula median pnorm qnorm reshape sd t.test
  #' @importFrom utils example read.csv write.csv
  

    if (length(grep("dev", par)) > 0) {
      mtext = switch(par,
        devsAllMeans = ", multiplied by two if \\code{plotit == \"both\"}.",
        devsMean = ", multiplied by two if \\code{plotit == \"both\"}.",
        "."
      )
      mtext2 = switch(par,
        devsAllMeans = "Alternatively the base of one file name can be given, and the necessary
            number of pdfs will be opened. ",
       devsAllTTests = "Alternatively the base of one file name can be given, and the necessary
            number of pdfs will be opened. ")
      mtext = paste(mtext, mtext2)
      par = "devs"
    }
  
    ret = switch(par, 
    FOIinfo = "@param FOIinfo \\code{\\link{data.frame}} with information about activities and the corresponding FOIs. See details \n",
    FOIs = "@param FOIs An array with the FOIs to be used in the function \n",
    dat = "@param dat A \\code{data.frame} with FOI activity data. See description below for more information about the content\n",
    week0 = paste("@param week0 What should be the week of activity in the centred time series? This parameter"
              ," also defines the length of the time centred time series, which will be \\code{2*week0 + 1} \n"),
    week0u = "@param week0 If a signal consists of \\code{weeks}, \\code{w0} describes the week to compare with\n",
    weeks = "@param weeks The number of weeks used for the signal, taken as all values of \\code{dat$WEEK} if missing \n",
    weekcorrect = "@param weekcorrect If the week numbers should be shifted, so that 0 will be one or more weeks after week0\n",
    cloudinds = paste("@param cloudinds Which indexes are regarded as clouds and can be discarded (for S2 images). Cloud filtering 
                can also be done externally, introducing a column VALID_OBS with 0 for invalid acquisitions \n"),
    iyear = "@param iyear What is the year of the data set \n",
    plotit = "@param plotit Logical; should plots be generated? \n",
    plotAllStats = "@param plotAllStats Logical; if FALSE only the quantiles and the mean will be plotted \n",
    events = "@param events A vector with the events under \\code{dat$EVENT_TYPE} that should be included \n",
    tsdir = "@param tsdir The name of the directory where extracted time series can be found.\n",
    odir = "@param odir The directory of the activity centred time series \n",
    sbss = "@param sbss Which group(s) of indices should be included \n",
    obands ="@param obands A list of output bands, grouped according to sbss, if missing, the default bands are used \n",
    stats = "@param stats The statistical descriptors \n",
    first =  "@param first Logical; TRUE if only the first event of the year of each 
              FOI should be included. \n", 
    dels = "@param dels The minimum number of days (or a vector of minimum number of days) between two activities for 
              one of them to be included in the mean.\n",
    weighted = "@param weighted Logical; TRUE if the mean should be weighted according 
                 to the number of acquisitions used for the weekly mean. \n",
    xlab = "@param xlab A title for the x-axis \n",
    ylab = "@param ylab A title for the y-axis \n",
    EVDcol = "@param EVDcol The column giving the activity date \n",
    EVcol = "@param EVcol The column giving the activity type \n",
    main = "@param main A title for the plot (the statistical descriptor and possibly the value of dels) \n",
    yranges = "@param yranges A list of plotting ranges for the y-axis, one for each statistical descriptor \n",
    yrange = "@param yrange Plotting range for the y-axis \n",
    allvar = "@param allvar A list of \\code{data.frames} with FOI activity data. 
              See description below for 
              more information about the content. The signal names should be used as 
              identifiers for each  \\code{data.frame} in the list.\n",
    inds = "@param inds Array with names of all indices, same order as used in evres",
    ind = "@param ind The name of the index used in a particular calcuation",
    selwks = "@param selwks For which weeks should the descriptive statistics be shown", 
    selstats = "@param selstats For which descriptors should the time series of values and probabilities be shown",
    evres = "@param evres A 5-dimensional array with means and probabilities, generated by functions in 
               the SALMS-package. See below for more details",
    cases = "@param cases Array with the number of cases for each combination index and descriptor ",
    legend = "@param legend If legend is TRUE or \"YES\", a legend will be added to each plot. 
                If legend = \"BEFORE\"),  there will be a separate page at the start of the 
                document with all legends instead of a legend on each plot. 
                   The argument is not case sensitive.",
    addNum = "@param addNum Logical; should event number types be added to plots",
    iprint = "@param iprint indicates whether the routine should print some information (0 = nothing, 1 some)",
    devs = paste0("@param devs One or more devices for plotting the results of the function,
            or one or more file names that will be opened as pdfs in the function.
            The number of devices should reflect the number of groups in sepPlots + 1",
                 mtext,
            " If only one device is given, all the plots will 
            go to this device. If none is given, all plots will go to the active device"),
    sepPlots =  "@param sepPlots List of groups of indexes that should be plotted for 
                a limited group of descriptors in separate devices (normally pdfs).
                It can either be in a
                format similar to \\code{sepPlots = list(p1 = c(\"s1_coh6\", \"s1_coh6_VH\"), 
                p2 = c(\"NDVI\", \"BSI\"))}, which will plot to two extra devices, 
                two s1-signals to the first and 2 s2-indexes to the second, for the
                default descriptor \\code{P50}. Otherwise it can be given in the format
                sepPlots = list(bands = list(p1 = c(\"s1_coh6\", \"s1_coh6_VH\"), 
                p2 = c(\"NDVI\", \"BSI\"), stats = c(\"P50\", \"MEAN\"), which 
                plot to the same extra devices, but will also include the \\code{MEAN} values.
                The number of groups in \\code{sepPlots} should be reflected by
                the number of devices \\code{devs}",
    drop = "@param drop Logical; if TRUE and there is only one activity type, the first
                dimension (represting activity type) will be dropped from the \\code{evres}-variable.
                The variable will then be 4-dimensional instead of 5-dimensional."
            )
    ret
}


salmsdetails = function(par) {
  ret = switch( par,
      FOIinfo = "The \\code{FOIinfo data.frame} should contain an overview of the activities
        for all FOIs of interest. Some columns and names are necessary (also lower case accepted): 
        \\itemize{
          \\item{ID: The ID of the FOIs (the function also accepts \"PSEUDO_ID\" or \"FIELD_ID\")}
          \\item{EVENT_DATE: When did the activity happen (or start)? Also \"ACTIVITY_DATE\" or 
                          \"EVENT_START_DATE\" are accepted names}
         \\item{EVENT_TYPE: This column should have a code for each type of activites that 
                            should be analysed}} \n",
      timeSeries = "The .csv-files with time series should be stored in a single directory, for each area of interest and for
each group of remote sensing signals/indicators. These files should have names
according to their content. The intention is to include more flexibility regarding names, but for
the moment, the time series need to have names reflecting their content based on Sentinel-1 and Sentinel-2.

Five different file names are expected (where ID is the ID of the FOI, the same as the ID of the `FOIinfo` object above:

\\itemize{
  \\item{ID_s1_coh6_ts.csv: The different time series for the coherence (including ratios between orbits)}
  \\item{ID_s1_bs_ts.csv: The different time series for the back scatter (including ratios between orbits)}
  \\item{ID_s2_ts.csv: The different time series for S2-bands}
  \\item{ID_s2_idx.csv: The different time series for different derived S2-indicators}
  \\item{ID_s1_bsidx.csv: The different time series for indicators derived from the backscatter}
}

All these time series need some particular columns for the function `createSignals` to be able to
create the activity centred time series:

\\itemize{
\\item{Date: The date (and time) of the acquisition. This date might be an average for example for 
         s1_coherence signals that are averages of different orbits, and maybe also 
         different polarizations. Ideally, these data sets should already also include
         the `week` column, which identifies the week of the year of the observations}
\\item{Week: This column is optional, but should be available for data sets that already
         include weekly averaged signals, such as averages of different polarizations and
         orbits.}
\\item{Band: One file can include many different bands, and this column should include the band 
         name for each observation. }
\\item{Orbit: This one is only relevant for S1-signals. It can be omitted if the orbit can be
          found from the date (if it also includes the time of the acquisition).}
\\item{Count: This is optional, and only necessary if the analyses should use a weighting factor
            (`weighted = TRUE`) in the analyses }
\\item{Descriptors: The remaining columns should have the time series for the different descriptors,
         with the name of each descriptor as column name.}
           }",
      dat = "The \\code{dat data.frame} needs data with particular column names for this 
         function. The column names are not case sensitive 
         \\describe{
           \\item{EVENT_TYPE: This column is necessary and should include activities
               matching the activities in the \\code{events} argument if the function
               should only operate on the activity types of that argument.}
           \\item{ID: The ID of the FOIs}
           \\item{DESCRIPTORS: The data frame must include columns with names matching the
               statistic descriptors in the argument \\code{stats} for which calculation
               is requested. Descriptors in \\code{stats} that are not matched by a 
               column name in \\code{dat} will be ignored. }
           \\item{WEEK: The week number of the observation relative to an activity.
               It is not necessary that the activity happens at week 0, only that all 
               activities happen in the same week.} 
           \\item{DOY: Which day of the year the activity happened}
           \\item{COUNT: The number of acquisitions per week, only used if 
                \\code{weighted = TRUE}}
         } \n",
     createOutput = "The function will create a series of activity centred .csv files in the 
             \\code{odir} directory. The files will be named according to the band name,
             and include the weekly averaged signal values for all FOIs.
             The content will be quite similar to the input, with some additional columns:
             \\itemize{
               \\item{EVENT_TYPE: This column is necessary if there is more than one 
                     activity type in the data set}
               \\item{WEEK: The week number of the observation relative to the start 
                     of the activity centred time series}
               \\item{DOY: Which day of the year the activity happened}
              }",
     evresvar = "evres is a 5-dimensional array, with information about the mean changes 
                 and probabilities of the change
                 being above a threshold. It can both be an input argument and the result of different functions in the 
     SALMS-package. If there is only one activity type, the first dimension can be dropped.
               The dimensions are \\code{c(events, inds, stats, evres-var , weeks)}. The content of the 
               array is defined by the different values of \\code{evres-var}. These can be:
     \\enumerate{
       \\item{1 \\code{mean(x)}}
       \\item{2 \\code{cumsum(x)}}
       \\item{3 \\code{std(x)}}
       \\item{4 \\code{std(cumsum(x))}}
       \\item{5 \\code{mean(x)*sign(mean(xx))} where \\code{xx} is the signal change for the weeks \\code{selwks}  (Making sure the average change after an activity is positive)}
       \\item{6 \\code{cumsum(x)*sign(mean(xx))} where \\code{xx} is the signal change for the weeks \\code{selwks}  (Making sure the average change after an activity is positive)}
       \\item{7 \\code{p0} - The probability of the change being larger than 0}
       \\item{8 \\code{p01} - The probability of the change being later than a threshold}
       \\item{9 \\code{p0c} - The probability of the cumulative change being larger than 0}
       \\item{10 \\code{p01c} - The probability of the cumulative change being larger than a threshold}
       \\item{11 \\code{max(po)} - The highest p0 of interesting weeks}
       \\item{12 \\code{max(p01)} - The highest p01 of interesting weeks}
       \\item{13 The value of the change relative to highest}
       \\item{14 The value of the change relative to lowest}
       \\item{15 The value \\code{p0} relative to the highest}
       \\item{16 The value \\code{p0} relative to the lowest}
     }"
  )
   ret
  
}
